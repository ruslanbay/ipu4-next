From 6586a0e63a2bbcde4d8b458e8f5b4a9f0d27c503 Mon Sep 17 00:00:00 2001
From: ruslanbay <67730802+ruslanbay@users.noreply.github.com>
Date: Sat, 22 Nov 2025 20:24:21 +0100
Subject: [PATCH 7/9] IPU4: convert /drivers/media/i2c/ov5693.c into
 /drivers/media/i2c/crlmodule/crl_ov5693_configuration.h

---
 drivers/media/i2c/Makefile                    |   1 +
 .../i2c/crlmodule/crl_ov5693_configuration.h  | 500 ++++++++++++++++++
 drivers/media/i2c/crlmodule/crlmodule-data.c  |   4 +
 drivers/media/platform/intel/ipu4-acpi.c      |   4 +
 4 files changed, 509 insertions(+)
 create mode 100644 drivers/media/i2c/crlmodule/crl_ov5693_configuration.h

diff --git a/drivers/media/i2c/Makefile b/drivers/media/i2c/Makefile
index c3cfd69a1e91..a0d1e0a95aba 100644
--- a/drivers/media/i2c/Makefile
+++ b/drivers/media/i2c/Makefile
@@ -74,6 +74,7 @@ obj-$(CONFIG_VIDEO_OV5645) += ov5645.o
 obj-$(CONFIG_VIDEO_OV5647) += ov5647.o
 obj-$(CONFIG_VIDEO_OV5648) += ov5648.o
 obj-$(CONFIG_VIDEO_OV5670) += ov5670.o
+obj-$(CONFIG_VIDEO_OV5693) += ov5693.o
 obj-$(CONFIG_VIDEO_OV5675) += ov5675.o
 obj-$(CONFIG_VIDEO_OV5695) += ov5695.o
 obj-$(CONFIG_VIDEO_OV6650) += ov6650.o
diff --git a/drivers/media/i2c/crlmodule/crl_ov5693_configuration.h b/drivers/media/i2c/crlmodule/crl_ov5693_configuration.h
new file mode 100644
index 000000000000..9b1d127455e1
--- /dev/null
+++ b/drivers/media/i2c/crlmodule/crl_ov5693_configuration.h
@@ -0,0 +1,500 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+/* Based on upstream /drivers/media/i2c/ov5693.c
+ *
+ * Author: Ruslan Bay 67730802+ruslanbay@users.noreply.github.com
+ */
+
+#ifndef __CRLMODULE_ov5693_CONFIGURATION_H_
+#define __CRLMODULE_ov5693_CONFIGURATION_H_
+
+#include "crlmodule-sensor-ds.h"
+
+static struct crl_register_write_rep ov5693_pll_900mbps[] = {
+	{ 0x3080, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x3082, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x3090, CRL_REG_LEN_08BIT, 0x02 },
+	{ 0x3091, CRL_REG_LEN_08BIT, 0x12 },
+	{ 0x3092, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3093, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x30a1, CRL_REG_LEN_08BIT, 0x60 },
+	{ 0x30b2, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x30b3, CRL_REG_LEN_08BIT, 0x83 },
+	{ 0x30b4, CRL_REG_LEN_08BIT, 0x03 },
+	{ 0x30b5, CRL_REG_LEN_08BIT, 0x04 },
+	{ 0x30b6, CRL_REG_LEN_08BIT, 0x01 },
+};
+
+static struct crl_register_write_rep ov5693_powerup_regset[] = {
+	{ 0x0103, CRL_REG_LEN_08BIT, 0x01 }, /* software reset */
+	{ 0x0100, CRL_REG_LEN_08BIT, 0x00 }, /* software standby */
+	/* A set of the upstream global regs */
+	{ 0x3016, CRL_REG_LEN_08BIT, 0xf0 },
+	{ 0x3017, CRL_REG_LEN_08BIT, 0xf0 },
+	{ 0x3018, CRL_REG_LEN_08BIT, 0xf0 },
+	{ 0x3022, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x3028, CRL_REG_LEN_08BIT, 0x44 },
+	{ 0x3098, CRL_REG_LEN_08BIT, 0x02 },
+	{ 0x3099, CRL_REG_LEN_08BIT, 0x19 },
+	{ 0x309a, CRL_REG_LEN_08BIT, 0x02 },
+	{ 0x309b, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x309c, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x30a0, CRL_REG_LEN_08BIT, 0xd2 },
+	{ 0x30a2, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x30b2, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x30b3, CRL_REG_LEN_08BIT, 0x83 },
+	{ 0x30b4, CRL_REG_LEN_08BIT, 0x03 },
+	{ 0x30b5, CRL_REG_LEN_08BIT, 0x04 },
+	{ 0x30b6, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x3080, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x3104, CRL_REG_LEN_08BIT, 0x21 },
+	{ 0x3106, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3406, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x3503, CRL_REG_LEN_08BIT, 0x07 },
+	{ 0x350b, CRL_REG_LEN_08BIT, 0x40 },
+	{ 0x3601, CRL_REG_LEN_08BIT, 0x0a },
+	{ 0x3602, CRL_REG_LEN_08BIT, 0x38 },
+	{ 0x3612, CRL_REG_LEN_08BIT, 0x80 },
+	{ 0x3620, CRL_REG_LEN_08BIT, 0x54 },
+	{ 0x3621, CRL_REG_LEN_08BIT, 0xc7 },
+	{ 0x3622, CRL_REG_LEN_08BIT, 0x0f },
+	{ 0x3625, CRL_REG_LEN_08BIT, 0x10 },
+	{ 0x3630, CRL_REG_LEN_08BIT, 0x55 },
+	{ 0x3631, CRL_REG_LEN_08BIT, 0xf4 },
+	{ 0x3632, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3633, CRL_REG_LEN_08BIT, 0x34 },
+	{ 0x3634, CRL_REG_LEN_08BIT, 0x02 },
+	{ 0x364d, CRL_REG_LEN_08BIT, 0x0d },
+	{ 0x364f, CRL_REG_LEN_08BIT, 0xdd },
+	{ 0x3660, CRL_REG_LEN_08BIT, 0x04 },
+	{ 0x3662, CRL_REG_LEN_08BIT, 0x10 },
+	{ 0x3663, CRL_REG_LEN_08BIT, 0xf1 },
+	{ 0x3665, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3666, CRL_REG_LEN_08BIT, 0x20 },
+	{ 0x3667, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x366a, CRL_REG_LEN_08BIT, 0x80 },
+	{ 0x3680, CRL_REG_LEN_08BIT, 0xe0 },
+	{ 0x3681, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3700, CRL_REG_LEN_08BIT, 0x42 },
+	{ 0x3701, CRL_REG_LEN_08BIT, 0x14 },
+	{ 0x3702, CRL_REG_LEN_08BIT, 0xa0 },
+	{ 0x3703, CRL_REG_LEN_08BIT, 0xd8 },
+	{ 0x3704, CRL_REG_LEN_08BIT, 0x78 },
+	{ 0x3705, CRL_REG_LEN_08BIT, 0x02 },
+	{ 0x370a, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x370b, CRL_REG_LEN_08BIT, 0x20 },
+	{ 0x370c, CRL_REG_LEN_08BIT, 0x0c },
+	{ 0x370d, CRL_REG_LEN_08BIT, 0x11 },
+	{ 0x370e, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x370f, CRL_REG_LEN_08BIT, 0x40 },
+	{ 0x3710, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x371a, CRL_REG_LEN_08BIT, 0x1c },
+	{ 0x371b, CRL_REG_LEN_08BIT, 0x05 },
+	{ 0x371c, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x371e, CRL_REG_LEN_08BIT, 0xa1 },
+	{ 0x371f, CRL_REG_LEN_08BIT, 0x0c },
+	{ 0x3721, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3724, CRL_REG_LEN_08BIT, 0x10 },
+	{ 0x3726, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x372a, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x3730, CRL_REG_LEN_08BIT, 0x10 },
+	{ 0x3738, CRL_REG_LEN_08BIT, 0x22 },
+	{ 0x3739, CRL_REG_LEN_08BIT, 0xe5 },
+	{ 0x373a, CRL_REG_LEN_08BIT, 0x50 },
+	{ 0x373b, CRL_REG_LEN_08BIT, 0x02 },
+	{ 0x373c, CRL_REG_LEN_08BIT, 0x41 },
+	{ 0x373f, CRL_REG_LEN_08BIT, 0x02 },
+	{ 0x3740, CRL_REG_LEN_08BIT, 0x42 },
+	{ 0x3741, CRL_REG_LEN_08BIT, 0x02 },
+	{ 0x3742, CRL_REG_LEN_08BIT, 0x18 },
+	{ 0x3743, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x3744, CRL_REG_LEN_08BIT, 0x02 },
+	{ 0x3747, CRL_REG_LEN_08BIT, 0x10 },
+	{ 0x374c, CRL_REG_LEN_08BIT, 0x04 },
+	{ 0x3751, CRL_REG_LEN_08BIT, 0xf0 },
+	{ 0x3752, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3753, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3754, CRL_REG_LEN_08BIT, 0xc0 },
+	{ 0x3755, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3756, CRL_REG_LEN_08BIT, 0x1a },
+	{ 0x3758, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3759, CRL_REG_LEN_08BIT, 0x0f },
+	{ 0x376b, CRL_REG_LEN_08BIT, 0x44 },
+	{ 0x375c, CRL_REG_LEN_08BIT, 0x04 },
+	{ 0x3774, CRL_REG_LEN_08BIT, 0x10 },
+	{ 0x3776, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x377f, CRL_REG_LEN_08BIT, 0x08 },
+	{ 0x3780, CRL_REG_LEN_08BIT, 0x22 },
+	{ 0x3781, CRL_REG_LEN_08BIT, 0x0c },
+	{ 0x3784, CRL_REG_LEN_08BIT, 0x2c },
+	{ 0x3785, CRL_REG_LEN_08BIT, 0x1e },
+	{ 0x378f, CRL_REG_LEN_08BIT, 0xf5 },
+	{ 0x3791, CRL_REG_LEN_08BIT, 0xb0 },
+	{ 0x3795, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3796, CRL_REG_LEN_08BIT, 0x64 },
+	{ 0x3797, CRL_REG_LEN_08BIT, 0x11 },
+	{ 0x3798, CRL_REG_LEN_08BIT, 0x30 },
+	{ 0x3799, CRL_REG_LEN_08BIT, 0x41 },
+	{ 0x379a, CRL_REG_LEN_08BIT, 0x07 },
+	{ 0x379b, CRL_REG_LEN_08BIT, 0xb0 },
+	{ 0x379c, CRL_REG_LEN_08BIT, 0x0c },
+	{ 0x3a04, CRL_REG_LEN_08BIT, 0x06 },
+	{ 0x3a05, CRL_REG_LEN_08BIT, 0x14 },
+	{ 0x3e07, CRL_REG_LEN_08BIT, 0x20 },
+	{ 0x4000, CRL_REG_LEN_08BIT, 0x08 },
+	{ 0x4001, CRL_REG_LEN_08BIT, 0x04 },
+	{ 0x4004, CRL_REG_LEN_08BIT, 0x08 },
+	{ 0x4006, CRL_REG_LEN_08BIT, 0x20 },
+	{ 0x4008, CRL_REG_LEN_08BIT, 0x24 },
+	{ 0x4009, CRL_REG_LEN_08BIT, 0x10 },
+	{ 0x4058, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x4101, CRL_REG_LEN_08BIT, 0xb2 },
+	{ 0x4307, CRL_REG_LEN_08BIT, 0x31 },
+	{ 0x4511, CRL_REG_LEN_08BIT, 0x05 },
+	{ 0x4512, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x481f, CRL_REG_LEN_08BIT, 0x30 },
+	{ 0x4826, CRL_REG_LEN_08BIT, 0x2c },
+	{ 0x4d02, CRL_REG_LEN_08BIT, 0xfd },
+	{ 0x4d03, CRL_REG_LEN_08BIT, 0xf5 },
+	{ 0x4d04, CRL_REG_LEN_08BIT, 0x0c },
+	{ 0x4d05, CRL_REG_LEN_08BIT, 0xcc },
+	{ 0x4837, CRL_REG_LEN_08BIT, 0x0a },
+	{ 0x5003, CRL_REG_LEN_08BIT, 0x20 },
+	{ 0x5013, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x5842, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x5843, CRL_REG_LEN_08BIT, 0x2b },
+	{ 0x5844, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x5845, CRL_REG_LEN_08BIT, 0x92 },
+	{ 0x5846, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x5847, CRL_REG_LEN_08BIT, 0x8f },
+	{ 0x5848, CRL_REG_LEN_08BIT, 0x01 },
+	{ 0x5849, CRL_REG_LEN_08BIT, 0x0c },
+	{ 0x5e10, CRL_REG_LEN_08BIT, 0x0c },
+	{ 0x3820, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3821, CRL_REG_LEN_08BIT, 0x1e },
+	{ 0x5041, CRL_REG_LEN_08BIT, 0x14 },
+};
+
+static struct crl_register_write_rep ov5693_streamon_regs[] = {
+	{ 0x0100, CRL_REG_LEN_08BIT, 0x01 },
+};
+
+static struct crl_register_write_rep ov5693_streamoff_regs[] = {
+	{ 0x0100, CRL_REG_LEN_08BIT, 0x00 },
+};
+
+static struct crl_register_write_rep ov5693_data_fmt_width10[] = {
+	{ 0x3012, CRL_REG_LEN_08BIT, 0x09 },
+};
+
+static struct crl_register_write_rep ov5693_mode_2592x1944[] = {
+	{ 0x3800, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3801, CRL_REG_LEN_08BIT, 0x10 },
+	{ 0x3802, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3803, CRL_REG_LEN_08BIT, 0x06 },
+	{ 0x3804, CRL_REG_LEN_08BIT, 0x0a },
+	{ 0x3805, CRL_REG_LEN_08BIT, 0x30 },
+	{ 0x3806, CRL_REG_LEN_08BIT, 0x07 },
+	{ 0x3807, CRL_REG_LEN_08BIT, 0x9e },
+	{ 0x3808, CRL_REG_LEN_08BIT, 0x0a },
+	{ 0x3809, CRL_REG_LEN_08BIT, 0x20 },
+	{ 0x380a, CRL_REG_LEN_08BIT, 0x07 },
+	{ 0x380b, CRL_REG_LEN_08BIT, 0x98 },
+	{ 0x380c, CRL_REG_LEN_08BIT, 0x0a },
+	{ 0x380d, CRL_REG_LEN_08BIT, 0x80 },
+	{ 0x380e, CRL_REG_LEN_08BIT, 0x07 },
+	{ 0x380f, CRL_REG_LEN_08BIT, 0xc0 },
+	{ 0x3810, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3811, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3812, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3813, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3814, CRL_REG_LEN_08BIT, 0x11 },
+	{ 0x3815, CRL_REG_LEN_08BIT, 0x11 },
+	{ 0x3820, CRL_REG_LEN_08BIT, 0x00 },
+	{ 0x3821, CRL_REG_LEN_08BIT, 0x1e },
+};
+
+static struct crl_sensor_detect_config ov5693_sensor_detect_regset[] = {
+	{
+		/* Yes, this is right. The datasheet for the OV5693 gives its ID as 0x5690 */
+		.reg = { 0x300a, CRL_REG_LEN_16BIT, 0x00005690 },
+		.width = 7,
+	},
+};
+
+
+static struct crl_pll_configuration ov5693_pll_configurations[] = {
+	{
+		.input_clk = 19200000, /* XVCLK */
+		.op_sys_clk = 419200000,
+		.bitsperpixel = 10,
+		.pixel_rate_csi = 167680000,
+		.pixel_rate_pa = 167680000,
+		.csi_lanes = 2,
+		.comp_items = 0,
+		.ctrl_data = 0,
+		.pll_regs_items = ARRAY_SIZE(ov5693_pll_900mbps),
+		.pll_regs = ov5693_pll_900mbps,
+	},
+};
+
+/* V4L2 Controls - minimal set for basic operation */
+static struct crl_v4l2_ctrl ov5693_v4l2_ctrls[] = {
+	{
+		.sd_type = CRL_SUBDEV_TYPE_PIXEL_ARRAY,
+		.op_type = CRL_V4L2_CTRL_GET_OP,
+		.context = SENSOR_POWERED_ON,
+		.ctrl_id = V4L2_CID_PIXEL_RATE,
+		.name = "V4L2_CID_PIXEL_RATE_PA",
+		.type = CRL_V4L2_CTRL_TYPE_INTEGER,
+		.data.std_data.min = 0,
+		.data.std_data.max = INT_MAX,
+		.data.std_data.step = 1,
+		.data.std_data.def = 167680000,
+		.flags = 0,
+		.impact = CRL_IMPACTS_NO_IMPACT,
+		.regs_items = 0,
+		.regs = 0,
+		.dep_items = 0,
+		.dep_ctrls = 0,
+	},
+	// {
+	// 	.sd_type = CRL_SUBDEV_TYPE_PIXEL_ARRAY,
+	// 	.op_type = CRL_V4L2_CTRL_GET_OP,
+	// 	.context = SENSOR_POWERED_ON,
+	// 	.ctrl_id = V4L2_CID_LINK_FREQ,
+	// 	.name = "V4L2_CID_LINK_FREQ",
+	// 	.type = CRL_V4L2_CTRL_TYPE_MENU_INT,
+	// 	.data.std_data.max = 0,
+	// 	.data.std_data.menu = 0,
+	// 	.flags = V4L2_CTRL_FLAG_READ_ONLY,
+	// 	.impact = CRL_IMPACTS_NO_IMPACT,
+	// 	.regs_items = 0,
+	// 	.regs = 0,
+	// },
+};
+
+static struct crl_subdev_rect_rep ov5693_2592x1944_rects[] = {
+	{
+		.subdev_type = CRL_SUBDEV_TYPE_PIXEL_ARRAY,
+		.in_rect = { .top = 0, .left = 0, .width = 2624, .height = 1956 },
+		.out_rect = { .top = 6, .left = 16, .width = 2592, .height = 1944 },
+	},
+	{
+		.subdev_type = CRL_SUBDEV_TYPE_BINNER,
+		.in_rect = { .top = 0, .left = 0, .width = 2592, .height = 1944 },
+		.out_rect = { .top = 0, .left = 0, .width = 2592, .height = 1944 },
+	},
+};
+
+static struct crl_mode_rep ov5693_modes[] = {
+	{
+		.sd_rects_items = ARRAY_SIZE(ov5693_2592x1944_rects),
+		.sd_rects = ov5693_2592x1944_rects,
+		.binn_hor = 1,
+		.binn_vert = 1,
+		.scale_m = 1,
+		.width = 2592,
+		.height = 1944,
+		.min_llp = 2688,
+		.min_fll = 1984,
+		.comp_items = 0,
+		.ctrl_data = 0,
+		.mode_regs_items = ARRAY_SIZE(ov5693_mode_2592x1944),
+		.mode_regs = ov5693_mode_2592x1944,
+	},
+};
+
+static struct crl_sensor_subdev_config ov5693_sensor_subdevs[] = {
+	{
+		.subdev_type = CRL_SUBDEV_TYPE_BINNER,
+		.name = "ov5693 binner",
+	},
+	{
+		.subdev_type = CRL_SUBDEV_TYPE_PIXEL_ARRAY,
+		.name = "ov5693 pixel array",
+	},
+};
+
+static struct crl_sensor_limits ov5693_sensor_limits = {
+	.x_addr_min = 0,
+	.y_addr_min = 0,
+	.x_addr_max = 2624,
+	.y_addr_max = 1956,
+	.min_frame_length_lines = 160,
+	.max_frame_length_lines = 65535,
+	.min_line_length_pixels = 2688,
+	.max_line_length_pixels = 32752,
+	.scaler_m_min = 1,
+	.scaler_m_max = 1,
+	.scaler_n_min = 1,
+	.scaler_n_max = 1,
+	.min_even_inc = 1,
+	.max_even_inc = 1,
+	.min_odd_inc = 1,
+	.max_odd_inc = 3,
+};
+
+static struct crl_flip_data ov5693_flip_configurations[] = {
+	{
+		.flip = CRL_FLIP_DEFAULT_NONE,
+		.pixel_order = CRL_PIXEL_ORDER_BGGR,
+	},
+	{
+		.flip = CRL_FLIP_VFLIP,
+		.pixel_order = CRL_PIXEL_ORDER_GRBG,
+	},
+	{
+		.flip = CRL_FLIP_HFLIP,
+		.pixel_order = CRL_PIXEL_ORDER_GBRG,
+	},
+	{
+		.flip = CRL_FLIP_HFLIP_VFLIP,
+		.pixel_order = CRL_PIXEL_ORDER_RGGB,
+	},
+};
+
+static struct crl_csi_data_fmt ov5693_crl_csi_data_fmt[] = {
+	{
+		.code = MEDIA_BUS_FMT_SGRBG10_1X10,
+		.pixel_order = CRL_PIXEL_ORDER_GRBG,
+		.bits_per_pixel = 10,
+		.regs_items = 1,
+		.regs = ov5693_data_fmt_width10,
+	},
+	{
+		.code = MEDIA_BUS_FMT_SRGGB10_1X10,
+		.pixel_order = CRL_PIXEL_ORDER_RGGB,
+		.bits_per_pixel = 10,
+		.regs_items = 1,
+		.regs = ov5693_data_fmt_width10,
+	},
+	{
+		.code = MEDIA_BUS_FMT_SBGGR10_1X10,
+		.pixel_order = CRL_PIXEL_ORDER_BGGR,
+		.bits_per_pixel = 10,
+		.regs_items = 0,
+		.regs = 0,
+	},
+	{
+		.code = MEDIA_BUS_FMT_SGBRG10_1X10,
+		.pixel_order = CRL_PIXEL_ORDER_GBRG,
+		.bits_per_pixel = 10,
+		.regs_items = 1,
+		.regs = ov5693_data_fmt_width10,
+	},
+};
+
+static struct crl_arithmetic_ops ov5693_frame_desc_width_ops[] = {
+	{
+		.op = CRL_ASSIGNMENT,
+		.operand.entity_type = CRL_DYNAMIC_VAL_OPERAND_TYPE_VAR_REF,
+		.operand.entity_val = CRL_VAR_REF_OUTPUT_WIDTH,
+	},
+};
+
+static struct crl_arithmetic_ops ov5693_frame_desc_height_ops[] = {
+	{
+		.op = CRL_ASSIGNMENT,
+		.operand.entity_type = CRL_DYNAMIC_VAL_OPERAND_TYPE_CONST,
+		.operand.entity_val = 1,
+	},
+};
+
+static struct crl_frame_desc ov5693_frame_desc[] = {
+	{
+		.flags.entity_val = 0,
+		.bpp.entity_type = CRL_DYNAMIC_VAL_OPERAND_TYPE_VAR_REF,
+		.bpp.entity_val = CRL_VAR_REF_BITSPERPIXEL,
+		.pixelcode.entity_val = MEDIA_BUS_FMT_FIXED,
+		.length.entity_val = 0,
+		.start_line.entity_val = 0,
+		.start_pixel.entity_val = 0,
+		.width = {
+			.ops_items = ARRAY_SIZE(ov5693_frame_desc_width_ops),
+			.ops = ov5693_frame_desc_width_ops,
+		},
+		.height = {
+			.ops_items = ARRAY_SIZE(ov5693_frame_desc_height_ops),
+			.ops = ov5693_frame_desc_height_ops,
+		},
+		.csi2_channel.entity_val = 0,
+		.csi2_data_type.entity_val = 0x2b,
+	},
+};
+
+static const struct crl_power_seq_entity ov5693_power_items[] = {
+	{
+		.type = CRL_POWER_ETY_REGULATOR_FRAMEWORK,
+		.ent_name = "avdd", /* Analog power */
+		.val = 2800000,
+		.delay = 0,
+	},
+	{
+		.type = CRL_POWER_ETY_REGULATOR_FRAMEWORK,
+		.ent_name = "dovdd", /* I/O power */
+		.val = 1800000,
+		.delay = 0,
+	},
+	{
+		.type = CRL_POWER_ETY_REGULATOR_FRAMEWORK,
+		.ent_name = "dvdd", /* Digital circuit power */
+		.val = 1200000,
+		.delay = 0,
+	},
+	{
+		.type = CRL_POWER_ETY_CLK_FRAMEWORK,
+		.val = 19200000, /* XVCLK */
+	},
+	{
+		.type = CRL_POWER_ETY_GPIO_FROM_PDATA,
+		.val = 1,
+		.delay = 10000,
+	},
+};
+
+static struct crl_sensor_configuration ov5693_crl_configuration = {
+
+	.power_items = ARRAY_SIZE(ov5693_power_items),
+	.power_entities = ov5693_power_items,
+
+	.powerup_regs_items = ARRAY_SIZE(ov5693_powerup_regset),
+	.powerup_regs = ov5693_powerup_regset,
+
+	.poweroff_regs_items = 0,
+	.poweroff_regs = 0,
+
+	.id_reg_items = ARRAY_SIZE(ov5693_sensor_detect_regset),
+	.id_regs = ov5693_sensor_detect_regset,
+
+	.subdev_items = ARRAY_SIZE(ov5693_sensor_subdevs),
+	.subdevs = ov5693_sensor_subdevs,
+
+	.sensor_limits = &ov5693_sensor_limits,
+
+	.pll_config_items = ARRAY_SIZE(ov5693_pll_configurations),
+	.pll_configs = ov5693_pll_configurations,
+
+	.modes_items = ARRAY_SIZE(ov5693_modes),
+	.modes = ov5693_modes,
+
+	.streamon_regs_items = ARRAY_SIZE(ov5693_streamon_regs),
+	.streamon_regs = ov5693_streamon_regs,
+
+	.streamoff_regs_items = ARRAY_SIZE(ov5693_streamoff_regs),
+	.streamoff_regs = ov5693_streamoff_regs,
+
+	.v4l2_ctrls_items = ARRAY_SIZE(ov5693_v4l2_ctrls),
+	.v4l2_ctrl_bank = ov5693_v4l2_ctrls,
+
+	.csi_fmts_items = ARRAY_SIZE(ov5693_crl_csi_data_fmt),
+	.csi_fmts = ov5693_crl_csi_data_fmt,
+
+	.flip_items = ARRAY_SIZE(ov5693_flip_configurations),
+	.flip_data = ov5693_flip_configurations,
+
+	.frame_desc_entries = ARRAY_SIZE(ov5693_frame_desc),
+	.frame_desc_type = CRL_V4L2_MBUS_FRAME_DESC_TYPE_CSI2,
+	.frame_desc = ov5693_frame_desc,
+};
+
+#endif /* __CRLMODULE_ov5693_CONFIGURATION_H_ */
diff --git a/drivers/media/i2c/crlmodule/crlmodule-data.c b/drivers/media/i2c/crlmodule/crlmodule-data.c
index d6a370a16746..517774cd9dbb 100644
--- a/drivers/media/i2c/crlmodule/crlmodule-data.c
+++ b/drivers/media/i2c/crlmodule/crlmodule-data.c
@@ -24,6 +24,7 @@
 #include "crl_imx477_slave_configuration.h"
 #include "crl_imx274_configuration.h"
 #include "crl_ov5670_configuration.h"
+#include "crl_ov5693_configuration.h"
 #include "crl_imx290_configuration.h"
 #include "crl_pixter_stub_configuration.h"
 #include "crl_ov2740_configuration.h"
@@ -43,6 +44,8 @@ static const struct crlmodule_sensors supported_sensors[] = {
 	{ "i2c-SONY230A:00", "imx230", &imx230_crl_configuration },
 	{ "i2c-INT3477:00", "ov8858", &ov8858_crl_configuration },
 	{ "i2c-OV5670AA:00", "ov5670", &ov5670_crl_configuration },
+	{ "i2c-INT33BE:00", "ov5693", &ov5693_crl_configuration },
+	{ "i2c-OV5693AA:00", "ov5693", &ov5693_crl_configuration },
 	{ "IMX185", "imx185", &imx185_crl_configuration },
 	{ "IMX477-MASTER", "imx477", &imx477_master_crl_configuration },
 	{ "IMX477-SLAVE-1", "imx477", &imx477_slave_crl_configuration },
@@ -58,6 +61,7 @@ static const struct crlmodule_sensors supported_sensors[] = {
 	{ "OV10640", "ov10640", &ov10640_crl_configuration },
 	{ "IMX274", "imx274", &imx274_crl_configuration },
 	{ "OV5670", "ov5670", &ov5670_crl_configuration },
+	{ "OV5693", "ov5693", &ov5693_crl_configuration },
 	{ "IMX290", "imx290", &imx290_crl_configuration},
 	{ "PIXTER_STUB", "pixter_stub", &pixter_stub_crl_configuration},
 	{ "PIXTER_STUB_B", "pixter_stub_b", &pixter_stub_b_crl_configuration},
diff --git a/drivers/media/platform/intel/ipu4-acpi.c b/drivers/media/platform/intel/ipu4-acpi.c
index cbdb901f0f09..2488aef2ae0b 100644
--- a/drivers/media/platform/intel/ipu4-acpi.c
+++ b/drivers/media/platform/intel/ipu4-acpi.c
@@ -831,6 +831,8 @@ static const struct ipu4_acpi_devices supported_devices[] = {
 	  ov8858regulators },
 	{ "INT3471",  CRLMODULE_NAME, get_crlmodule_pdata, NULL, 0 },
 	{ "OV5670AA",  CRLMODULE_NAME, get_crlmodule_pdata, NULL, 0 },
+	{ "OV5693AA",  CRLMODULE_NAME, get_crlmodule_pdata, NULL, 0 },
+	{ "INT33BE",  CRLMODULE_NAME, get_crlmodule_pdata, NULL, 0 },
 	{ "SONY214A", CRLMODULE_NAME, get_crlmodule_pdata, "dw9714", 0 },
 	{ "SONY132A", SMIAPP_NAME,    get_smiapp_pdata, imx132_op_clocks,
 	  sizeof(imx132_op_clocks) },
@@ -862,6 +864,8 @@ static const struct acpi_device_id ipu4_acpi_match[] = {
 	{ "SONY214A", 0 },
 	{ "SONY132A", 0 },
 	{ "OV5670AA", 0 },
+	{ "OV5693AA", 0 },
+	{ "INT33BE", 0 },
 	{ "ADV7481A", 0 },
 	{ "ADV7481B", 0 },
 	{},
-- 
2.34.1

